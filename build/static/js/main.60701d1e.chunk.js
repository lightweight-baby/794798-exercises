(this.webpackJsonpfrontend1=this.webpackJsonpfrontend1||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),r=n(15),i=n.n(r),a=n(6),u=n(3),s=n(4),l=n.n(s),d="http://localhost:3001/api/persons",j=function(){return l.a.get(d).then((function(e){return e.data}))},f=function(e){return l.a.post(d,e)},b=function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(d,"/").concat(e))},O=function(e){var t={fontSize:20,margin:20,padding:10,borderRadius:10,borderStyle:"solid",borderColor:"green"},n=e.arr[0],o=e.arr[1];return null===n?null:(o&&(t.borderColor="red"),Object(c.jsx)("div",{style:t,children:n}))},p=function(e){var t=e.search,n=e.setSearch,o=e.setShowAll;return Object(c.jsxs)("div",{children:["filter phone book by name:",Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value.toLowerCase()),e.target.value?o(!1):o(!0)}})]})},m=function(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),r=n[0],i=n[1],s=Object(o.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1],h=e.persons,O=e.setPersons,p=e.setNotification,m=function(){setTimeout((function(){p([null,!1])}),5e3)};return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=h.filter((function(e){return e.name===r}));if(t.length){if(window.confirm("Replace ".concat(r,"'s phone number with a new one?"))){var n=Object(a.a)(Object(a.a)({},t[0]),{},{number:d});b(t[0].id,n).then((function(e){O(h.map((function(n){return n.id!==t[0].id?n:e}))),p(["'".concat(r,"' updated."),!1]),m()})).catch((function(e){console.log(e),p(["failed to update '".concat(r,"'."),!0]),m()}))}}else{var c={name:r,number:d,id:h[h.length-1].id+1};f(c).then(O(h.concat(c))),p(["'".concat(r,"' created."),!1]),m()}},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:r,onChange:function(e){i(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:d,onChange:function(e){j(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var t=e.setNotification,n=e.setPersons,o=e.persons,r=function(){setTimeout((function(){t([null,!1])}),5e3)},i=function(e,c){(function(e){return window.confirm("Are you sure you wanna delete ".concat(e,"?"))})(c)&&h(e).then((function(){n(o.filter((function(t){return t.id!==e}))),t(["'".concat(c,"' deleted."),!1]),r()})).catch((function(e){console.log(e),t(["failed to delete '".concat(c,"'."),!0]),r()}))};return e.personsToShow.map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:function(){return i(e.id,e.name)},children:"delete"})]},e.id)}))},x=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(!0),a=Object(u.a)(i,2),s=a[0],l=a[1],d=Object(o.useState)(""),f=Object(u.a)(d,2),b=f[0],h=f[1],x=Object(o.useState)([null,!1]),g=Object(u.a)(x,2),w=g[0],S=g[1];Object(o.useEffect)((function(){j().then((function(e){r(e)}))}),[]);var C=s?n:n.filter((function(e){return e.name.toLowerCase().includes(b)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(O,{arr:w}),Object(c.jsx)("h2",{children:"Search"}),Object(c.jsx)(p,{setShowAll:l,search:b,setSearch:h}),Object(c.jsx)("h2",{children:"Add a new contact"}),Object(c.jsx)(m,{persons:n,setPersons:r,setNotification:S}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(v,{personsToShow:C,persons:n,setPersons:r,setNotification:S})]})};i.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.60701d1e.chunk.js.map
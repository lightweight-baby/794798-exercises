(this.webpackJsonpfrontend1=this.webpackJsonpfrontend1||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),r=n(15),a=n.n(r),i=n(6),u=n(3),s=n(4),d=n.n(s),l="http://localhost:3001/api/persons",f=function(){return d.a.get(l).then((function(e){return e.data}))},j=function(e){return d.a.post(l,e)},b=function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(l,"/").concat(e))},O=function(e){var t={fontSize:20,margin:20,padding:10,borderRadius:10,borderStyle:"solid",borderColor:"green"},n=e.arr[0],o=e.arr[1];return null===n?null:(o&&(t.borderColor="red"),Object(c.jsx)("div",{style:t,children:n}))},p=function(e){var t=e.search,n=e.setSearch,o=e.setShowAll;return Object(c.jsxs)("div",{children:["filter phone book by name:",Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value.toLowerCase()),e.target.value?o(!1):o(!0)}})]})},m=function(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(o.useState)(""),d=Object(u.a)(s,2),l=d[0],f=d[1],h=e.persons,O=e.setPersons,p=e.setNotification,m=function(){setTimeout((function(){p([null,!1])}),1e4)};return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=h.filter((function(e){return e.name===r}));if(t.length){if(window.confirm("Replace ".concat(r,"'s phone number with a new one?"))){var n=Object(i.a)(Object(i.a)({},t[0]),{},{number:l});b(t[0].id,n).then((function(e){O(h.map((function(n){return n.id!==t[0].id?n:e}))),p(["'".concat(r,"' updated."),!1]),m()})).catch((function(e){console.log(e),p(["failed to update '".concat(r,"'."),!0]),m()}))}}else{var c={name:r,number:l,id:h[h.length-1].id+1};j(c).then((function(e){O(h.concat(c)),p(["'".concat(r,"' created."),!1]),m()})).catch((function(e){p(["'".concat(e.response.data.error,"'"),!0]),m()}))}},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:r,onChange:function(e){a(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:l,onChange:function(e){f(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var t=e.setNotification,n=e.setPersons,o=e.persons,r=function(){setTimeout((function(){t([null,!1])}),5e3)},a=function(e,c){(function(e){return window.confirm("Are you sure you wanna delete ".concat(e,"?"))})(c)&&h(e).then((function(){n(o.filter((function(t){return t.id!==e}))),t(["'".concat(c,"' deleted."),!1]),r()})).catch((function(e){console.log(e),t(["failed to delete '".concat(c,"'."),!0]),r()}))};return e.personsToShow.map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:function(){return a(e.id,e.name)},children:"delete"})]},e.id)}))},x=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(!0),i=Object(u.a)(a,2),s=i[0],d=i[1],l=Object(o.useState)(""),j=Object(u.a)(l,2),b=j[0],h=j[1],x=Object(o.useState)([null,!1]),g=Object(u.a)(x,2),w=g[0],S=g[1];Object(o.useEffect)((function(){f().then((function(e){r(e)}))}),[]);var C=s?n:n.filter((function(e){return e.name.toLowerCase().includes(b)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(O,{arr:w}),Object(c.jsx)("h2",{children:"Search"}),Object(c.jsx)(p,{setShowAll:d,search:b,setSearch:h}),Object(c.jsx)("h2",{children:"Add a new contact"}),Object(c.jsx)(m,{persons:n,setPersons:r,setNotification:S}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(v,{personsToShow:C,persons:n,setPersons:r,setNotification:S})]})};a.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cab7f2c4.chunk.js.map